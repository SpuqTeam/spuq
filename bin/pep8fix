#! /bin/bash

file="$1"
cat $file \
    | sed 's/\([({[]\)[[:blank:]]\+/\1/g' \
    | sed 's/[[:blank:]]\+\([])}]\)/\1/g' \
    | sed 's/[[:blank:]]\+$//g'\
    | sed 's/,\([^[:blank:]]\)/, \1/g'\
    | sed 's/\([%^<>+*/=-]\+\)\([^[:blank:]]\)/\1 \2/g'\
    | sed 's/\([^[:blank:]]\)\([%^<>+*/=-]\+\)/\1 \2/g'\
    | sed 's/\([%^<>+*/=-]\+\) =/\1=/g'\
    | sed 's/* */**/g'\
